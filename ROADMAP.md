# 项目演进路线图

本文档提出了在当前 IPTV 聚合服务基础上的持续演进方向，帮助团队规划迭代重点并指导新人实践。

## 近期目标（1-2 个迭代）

- **完善错误可观测性**（✅ 2025-10 完成首阶段）：
  - 已在 `IPTVAggregator` 的网络与解析环节加入分层日志，覆盖空数据、格式异常与请求错误。
  - 现阶段使用自研的结构化 JSON 日志记录器，可通过 `LOG_LEVEL` 控制输出，并支持子模块区分，后续仍可评估接入第三方日志方案。
- **配置热更新与校验**（✅ 2025-10 已上线基础能力）：
  - 提供同步校验器覆盖订阅、别名、模版、EPG 与 Logo 文件，CLI 与 API 均在执行前进行校验。
  - 新增 `/reload-config` 接口实现热加载，后续可结合文件监听或通知机制进一步自动化。
- **订阅源健康检查**：
  - 利用 `axios` 的超时与并发控制，实现定期 ping 并输出报告。
  - 在 `/status` 接口返回最近一次健康检查的概览。

## 中期目标（3-5 个迭代）

- **输出多样化**：
  - 支持按客户端定制模板（如移动端精简版、机顶盒扩展版）。
  - 引入 GraphQL 或 gRPC 层，便于第三方系统按需获取频道数据。
- **缓存与性能优化**：
  - 对热门频道的 Logo 与 EPG 数据启用本地缓存或 CDN 分发。
  - 通过队列（如 BullMQ）处理大规模订阅源合并，避免阻塞主线程。
- **自动化测试体系**：
  - 编写基于 Jest 的单元测试，覆盖解析与导出逻辑。
  - 构建 CI 流水线（GitHub Actions），在 PR 中执行 lint、测试与构建。

## 远期愿景

- **多租户支持**：允许不同团队或社区共享同一部署，通过命名空间隔离订阅、模板与输出。
- **可视化运营后台**：提供基于 React/Vue 的界面，管理频道、别名与模板，并可查看实时更新状态。
- **生态扩展**：与常见播放器或家庭媒体中心（Kodi、Plex 等）建立接口适配器，减少用户手动导入步骤。

## 学习与协作建议

- 建议新人在实现上述目标时，优先阅读 `README.md` 与 `aggregator.js`，结合 `index.js` 和 `server.js` 的调用路径理解数据流。
- 在着手新功能前编写技术方案，明确依赖、数据格式与部署影响，再进入编码阶段。
- 每次迭代完成后更新本文档，记录已完成的里程碑与下一步计划，保持团队对路线图的一致理解。

